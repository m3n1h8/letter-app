<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Vi·∫øt th∆∞</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
    button { padding: 10px 20px; }
    #ketQua { margin-top: 20px; color: green; }
  </style>
</head>
<body>
  <h1>üì® G·ª≠i Th∆∞</h1>

  <!-- √î nh·∫≠p ti√™u ƒë·ªÅ th∆∞ -->
  <label for="tieuDe">Ti√™u ƒë·ªÅ:</label>
  <input id="tieuDe" placeholder="Nh·∫≠p ti√™u ƒë·ªÅ th∆∞">

  <!-- √î nh·∫≠p n·ªôi dung th∆∞ -->
  <label for="noiDung">N·ªôi dung:</label>
  <textarea id="noiDung" rows="6" placeholder="Nh·∫≠p n·ªôi dung th∆∞"></textarea>

  <!-- √î nh·∫≠p t√™n ng∆∞·ªùi g·ª≠i -->
  <label for="nguoiGui">Ng∆∞·ªùi g·ª≠i:</label>
  <input id="nguoiGui" placeholder="T√™n b·∫°n l√† g√¨?">

  <!-- N√∫t g·ª≠i th∆∞ -->
  <button id="btnGui">G·ª≠i th∆∞</button>

  <!-- Hi·ªÉn th·ªã k·∫øt qu·∫£ (link ho·∫∑c l·ªói) -->
  <div id="ketQua"></div>

  <script>
    document.getElementById("btnGui").addEventListener("click", async () => {
      // 1. L·∫•y gi√° tr·ªã t·ª´ c√°c √¥ input
      const tieuDe = document.getElementById("tieuDe").value.trim();
      const noiDung = document.getElementById("noiDung").value.trim();
      const nguoiGui = document.getElementById("nguoiGui").value.trim();
      const ketQuaEl = document.getElementById("ketQua");
      ketQuaEl.textContent = "";  // reset th√¥ng b√°o

      // 2. Ki·ªÉm tra nh·∫≠p li·ªáu
     // if (!tieuDe || !noiDung || !nguoiGui) {
    //    alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß ti√™u ƒë·ªÅ, n·ªôi dung v√† t√™n ng∆∞·ªùi g·ª≠i.");
    //    return;
    //  }

      // 3. Chu·∫©n b·ªã d·ªØ li·ªáu g·ª≠i l√™n JSONBin
      const payload = {
        record: { tieuDe, noiDung, nguoiGui },
        private: true       // true = bin ri√™ng t∆∞, false = bin c√¥ng khai
      };

      try {
        // 4. G·ª≠i POST t·ªõi JSONBin
       // const response = await 
        fetch("https://api.jsonbin.io/v3/b", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "X-Access-Key": "$2a$10$jcTFWdrVTyEvPPqaOa/j9OURzv/IbGEHkQ/RWrfqvPah7kTjEWyX."  // ‚Üê THAY B·∫∞NG Access Key
          },
          body: JSON.stringify(payload)
        }).then(res=>res.json())
        .then(data => {
                  alert("ƒê√£ t·∫°o th∆∞ th√†nh c√¥ng!");
                  alert("ID c·ªßa th∆∞:"+ data.metadata.id);})

        // 5. Ki·ªÉm tra HTTP status
      //  if (!response.ok) {
      //    const errorText = await response.text();
       //   throw new Error(`HTTP ${response.status}: ${errorText}`);
      //  }

        // 6. Ph√¢n t√≠ch JSON tr·∫£ v·ªÅ
        // const data = await response.json();
       // console.log("Ph·∫£n h·ªìi t·ª´ JSONBin:", data);

        // 7. L·∫•y ID v√† t·∫°o link chia s·∫ª
      //  const binId = data.metadata.id;
       // const link = `https://jsonbin.io/v/${binId}`;

        // 8. Hi·ªÉn th·ªã link
     //   ketQuaEl.innerHTML = `
      //    ‚úÖ Th∆∞ ƒë√£ t·∫°o th√†nh c√¥ng!<br>
       //   Link chia s·∫ª: 
      // <a href="${link}" target="_blank">${link}</a>
        //`;

      } catch (err) {
        console.error("L·ªói khi g·ª≠i th∆∞:", err);
        ketQuaEl.style.color = "red";
        ketQuaEl.textContent = "‚ùå C√≥ l·ªói x·∫£y ra: " + err.message;
     }
    }
);
  </script>
</body>
</html>
